{"ast":null,"code":"import _asyncToGenerator from \"/home/klouud-dev/Documents/Axisroom/cgh-Booking-engine/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { BASE_URL, BOOKING_ENGINE_ID, getDefaultHeaders } from '../shared/constants/url.constants';\nimport { cloneDeep } from 'lodash-es';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./booking.service\";\nexport let PaymentService = /*#__PURE__*/(() => {\n  class PaymentService {\n    constructor(http, bookingService) {\n      this.http = http;\n      this.bookingService = bookingService;\n    }\n\n    createOrderAndMakePayment(bookingItem, personalDetailsForm) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        _this.createOrder(bookingItem).subscribe(res1 => {\n          _this.makePayment(bookingItem, personalDetailsForm);\n        });\n      })();\n    }\n\n    createOrder(bookingItem) {\n      let params = {\n        bookingEngineId: BOOKING_ENGINE_ID,\n        productId: bookingItem.hotelId,\n        searchId: bookingItem.searchId,\n        checkIn: bookingItem.checkIn,\n        checkOut: bookingItem.checkOut,\n        cityId: bookingItem.renderData.address.cityId,\n        paxInfo: bookingItem.paxInfo,\n        selectedrooms: `{\"1\":{\"productId\":${bookingItem.hotelId},\"roomMap\":{\"0\":{\"roomId\":${bookingItem.rooms[0].roomId},\"ratePlanId\":${bookingItem.rooms[0].ratePlanId},\"addOnMap\":{},\"addchildMap\":{},\"policyChargeScope\":{}}}}}`\n      };\n      return this.http.get(`${BASE_URL}api/be/rooms`, {\n        params: params,\n        headers: getDefaultHeaders()\n      });\n    }\n\n    makePayment(bookingItem, personalDetails) {\n      this.bookingService.setPGLoaderFlag();\n      let item = cloneDeep(bookingItem);\n      this.bookingService.removeCurrentBookingItemFromList();\n      let url1 = `https://app.axisrooms.com/beV2/hotelBooking.html?currency=1&`;\n      let url2 = `searchId=${item.searchId}&promoCodeApplied=&promoCode=&`;\n      let url3 = `tokenvalues=&master_pax_first_name=${personalDetails.firstName}&master_pax_last_name=${personalDetails.lastName}&`;\n      let url4 = `contactEmail=${personalDetails.emailId}&contactMobile=${personalDetails.mobileNo}&`;\n      let url5 = `additional_request=${personalDetails.specialRequest}&payAtHotel=false&cardType=4&cardNO=&`;\n      let url6 = `cardValidity_month=&cardValidity_year=&cardHolderName=&cardValidity_cvv=`;\n      let finalUrl = url1 + url2 + url3 + url4 + url5 + url6;\n      window.open(finalUrl, '_self');\n    }\n\n  }\n\n  PaymentService.ɵfac = function PaymentService_Factory(t) {\n    return new (t || PaymentService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.BookingService));\n  };\n\n  PaymentService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: PaymentService,\n    factory: PaymentService.ɵfac,\n    providedIn: 'root'\n  });\n  return PaymentService;\n})();","map":null,"metadata":{},"sourceType":"module"}